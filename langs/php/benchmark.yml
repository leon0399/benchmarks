title: 'PHP'

strategy:
  matrix:
    versions:
      - 5.6
      - 7.0
      - 7.1
      - 7.2
      - 7.3
      - 7.4
      - 8.0
      - 8.1
      - 8.2
      - 8.3
      - 8.4

    command:
      - title: 'PHP'
        command: 'php{version} -dxdebug.mode=off -dopcache.enable_cli=0 --file {file}'

      - title: 'JIT: tracing'
        command: 'php{version} -dxdebug.mode=off -dopcache.enable_cli=1 -dopcache.jit_buffer_size=100M -dopcache.jit=tracing --file {file}'
        versions:
          - 8.0
          - 8.1
          - 8.2
          - 8.3
          - 8.4
        tags:
          - JIT

      - title: 'JIT: function'
        command: 'php{version} -dxdebug.mode=off -dopcache.enable_cli=1 -dopcache.jit_buffer_size=100M -dopcache.jit=function --file {file}'
        versions:
          - 8.0
          - 8.1
          - 8.2
          - 8.3
          - 8.4
        tags:
          - JIT

    files:
      - linpack/Linpack.php

      - primes/Simple.php
      - primes/Atkin.php

      - collatz/MaxSequence.php

      - mandelbrot/Simple.php

      - treap/Naive.php

      - recursion/Tak.php
